Version 4
SHEET 1 2976 10920
WIRE -144 -112 -320 -112
WIRE 96 -112 -144 -112
WIRE 192 -112 176 -112
WIRE -144 -80 -144 -112
WIRE 192 -64 192 -112
WIRE 320 -64 192 -64
WIRE 480 -64 320 -64
WIRE -64 -32 -64 -176
WIRE 96 -16 80 -16
WIRE 192 -16 192 -64
WIRE 192 -16 176 -16
WIRE -144 16 -144 -16
WIRE -128 16 -144 16
WIRE 368 16 368 0
WIRE -224 32 -224 16
WIRE 320 32 320 -64
WIRE 336 32 320 32
WIRE -320 48 -320 -112
WIRE -256 48 -320 48
WIRE 480 48 480 -64
WIRE 480 48 400 48
WIRE 720 48 720 16
WIRE -144 64 -144 16
WIRE -144 64 -192 64
WIRE -48 64 -64 64
WIRE 0 64 -48 64
WIRE 80 64 80 -16
WIRE 80 64 64 64
WIRE 96 64 80 64
WIRE 192 64 160 64
WIRE 272 64 192 64
WIRE 336 64 272 64
WIRE 688 64 608 64
WIRE -256 80 -352 80
WIRE -48 80 -48 64
WIRE 272 80 272 64
WIRE 896 80 752 80
WIRE 192 96 192 64
WIRE 368 96 368 80
WIRE 480 96 480 48
WIRE 688 96 656 96
WIRE -224 112 -224 96
WIRE 720 144 720 112
WIRE -48 176 -48 160
WIRE 192 176 192 160
WIRE 480 192 480 176
WIRE 608 192 608 64
WIRE 608 192 480 192
WIRE 480 208 480 192
WIRE 192 272 192 256
WIRE 272 272 272 160
WIRE 272 272 192 272
WIRE -352 288 -352 80
WIRE -304 288 -352 288
WIRE -208 288 -224 288
WIRE -112 288 -208 288
WIRE 192 288 192 272
WIRE -208 320 -208 288
WIRE -112 336 -112 288
WIRE 480 336 480 288
WIRE 480 336 -112 336
WIRE -208 400 -208 384
WIRE -352 432 -352 288
WIRE 400 432 -352 432
WIRE 512 432 480 432
WIRE 656 432 656 96
WIRE 656 432 512 432
WIRE 512 480 512 432
WIRE -912 512 -912 464
WIRE 80 512 -112 512
WIRE 240 512 160 512
WIRE 512 576 512 544
WIRE -912 608 -912 592
WIRE -352 608 -352 432
WIRE -224 608 -352 608
WIRE -112 608 -112 512
WIRE -112 608 -144 608
WIRE 16 608 -112 608
WIRE 112 608 80 608
WIRE 240 608 240 512
WIRE 240 608 192 608
WIRE 416 608 240 608
WIRE 240 656 240 608
WIRE 240 736 240 720
WIRE 496 736 496 704
WIRE 416 752 416 608
WIRE 464 752 416 752
WIRE 672 768 528 768
WIRE 464 784 416 784
WIRE 496 832 496 800
WIRE -352 848 -352 608
WIRE -112 864 -112 608
WIRE 48 864 -112 864
WIRE 240 864 128 864
WIRE 416 864 416 784
WIRE 416 864 240 864
WIRE 240 880 240 864
WIRE -352 960 -352 928
WIRE 240 976 240 944
WIRE -352 1104 -352 1040
FLAG 240 736 0
FLAG -352 1104 0
FLAG 240 976 0
FLAG 496 832 0
FLAG 496 704 3v3
FLAG -912 608 0
FLAG -912 464 3v3
FLAG 720 144 0
FLAG 720 16 3v3
FLAG 512 576 0
FLAG -224 16 3v3
FLAG -224 112 0
FLAG 192 288 0
FLAG -208 400 0
FLAG 368 0 3v3
FLAG 368 96 0
FLAG -64 -176 3v3
FLAG -48 176 0
SYMBOL res 208 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL schottky 16 624 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 176 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL cap 224 656 R0
SYMATTR InstName C1
SYMATTR Value 100p
SYMBOL voltage -352 832 R0
WINDOW 3 -447 99 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0.6 0.620 0 10n 200n 0.2u 1u)
SYMATTR InstName V1
SYMBOL res 144 848 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL cap 224 880 R0
SYMATTR InstName C2
SYMATTR Value 3p
SYMBOL voltage -912 496 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL OpAmps\\UniversalOpAmp2 496 768 R0
SYMATTR InstName U2
SYMATTR Value2 Avol=10Meg GBW=10G Slew=10G
SYMBOL res -128 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL OpAmps\\UniversalOpAmp2 720 80 R0
SYMATTR InstName U3
SYMATTR Value2 Avol=10Meg GBW=10G Slew=10G
SYMBOL res 496 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL cap 496 480 R0
SYMATTR InstName C5
SYMATTR Value 3p
SYMBOL res 464 80 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res 464 192 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL OpAmps\\opamp2 -224 0 R0
SYMATTR InstName U4
SYMATTR Value TLV354
SYMBOL cap 176 96 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL res 256 176 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL voltage -352 944 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 0.0005 0.01Meg 100u)
SYMBOL res -208 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL cap -224 320 R0
SYMATTR InstName C4
SYMATTR Value 10n
SYMBOL OpAmps\\opamp2 368 -16 R0
SYMATTR InstName U1
SYMATTR Value TLV354
SYMBOL npn -128 -32 R0
SYMATTR InstName Q1
SYMATTR Value 2n3904
SYMBOL res -64 64 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL schottky 0 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL diode 96 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N5819
SYMBOL res 192 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 192 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL diode -128 -80 M0
SYMATTR InstName D4
SYMATTR Value 1N5819
SYMBOL res 176 160 R0
SYMATTR InstName R13
SYMATTR Value 10
TEXT -776 1128 Left 2 !.tran 0 200u 0 10n
TEXT -32 1272 Left 2 !.model SN74LVC1G3157 SW(Ron=6 Roff=1G Vt=1.65 Vh=0.66)
TEXT 616 664 Left 2 ;Standard Leaky Comparator
TEXT 680 224 Left 2 ;Buffered Leaky Comparator
TEXT 1552 96 Left 2 !*$\n* TLV354\n*************************************************************************************************\n* (C) Copyright 2019 Texas Instruments Incorporated. All rights reserved.                                            \n*************************************************************************************************\n** This model is designed as an aid for customers of Texas Instruments.\n** TI and its licensor's and suppliers make no warranties, either expressed\n** or implied, with respect to this model, including the warranties of \n** merchantability or fitness for a particular purpose.  The model is\n** provided solely on an "as is" basis.  The entire risk as to its quality\n** and performance is with the customer\n*************************************************************************************************\n*\n* This model is subject to change without notice. Texas Instruments\n* Incorporated is not responsible for updating this model.\n*\n*************************************************************************************************\n*\n** Released by: Online Design Tools, Texas Instruments Inc.\n* Part: TLV354\n* Date: 13FEB2019\n* Model Type: Generic (suitable for all analysis types)\n* EVM Order Number: N/A \n* EVM Users Guide:  N/A \n* Datasheet: SBOS756 -OCTOBER 2016\n* Created with Green-Williams-Lis Op Amp Macro-model Architecture\n*\n* Model Version: Final 1.2\n*\n*****************************************************************************\n*\n* Updates:\n*\n* Final 1.2\n* Updated with unique subckt name,Current Noise, Vos drift and edits in claw block\n*\n*\n* Final 1.1\n* Release to Web.\n*\n****************************************************************************\n* Model Usage Notes:\n* 1. The following parameters are modeled: \n*                               OPEN-LOOP GAIN AND PHASE VS. FREQUENCY  WITH RL, CL EFFECTS (Aol)\n*                               UNITY GAIN BANDWIDTH (GBW)\n*                               INPUT COMMON-MODE REJECTION RATIO VS. FREQUENCY (CMRR)\n*                               POWER SUPPLY REJECTION RATIO VS. FREQUENCY (PSRR)\n*                               DIFFERENTIAL INPUT IMPEDANCE (Zid)\n*                               COMMON-MODE INPUT IMPEDANCE (Zic)\n*                               OPEN-LOOP OUTPUT IMPEDANCE VS. FREQUENCY (Zo)\n*                               OUTPUT CURRENT THROUGH THE SUPPLY (Iout)\n*                               INPUT VOLTAGE NOISE DENSITY VS. FREQUENCY (en)\n*                               INPUT CURRENT NOISE DENSITY VS. FREQUENCY (in)\n*                               OUTPUT VOLTAGE SWING vs. OUTPUT CURRENT (Vo)\n*                               SHORT-CIRCUIT OUTPUT CURRENT (Isc)\n*                               QUIESCENT CURRENT (Iq)\n*                               SETTLING TIME VS. CAPACITIVE LOAD (ts)\n*                               SLEW RATE (SR)\n*                               SMALL SIGNAL OVERSHOOT VS. CAPACITIVE LOAD\n*                               LARGE SIGNAL RESPONSE\n*                               OVERLOAD RECOVERY TIME (tor)\n*                               INPUT BIAS CURRENT (Ib)\n*                               INPUT OFFSET CURRENT (Ios)\n*                               INPUT OFFSET VOLTAGE (Vos)\n*                               INPUT OFFSET VOLTAGE VS. TEMPERATURE (VOS DRIFT)\n*                               INPUT COMMON-MODE VOLTAGE RANGE (Vcm)\n*                               INPUT OFFSET VOLTAGE VS. INPUT COMMON-MODE VOLTAGE (Vos vs. Vcm)\n*                               INPUT/OUTPUT ESD CELLS (ESDin, ESDout)\n******************************************************\n.subckt TLV354 IN+ IN- VCC VEE OUT\n******************************************************\n* MODEL DEFINITIONS:\n.model OL_SW VSWITCH(Ron=1e-3 Roff=1e9 Von=100e-3 Voff=0)\n.model R_NOISELESS RES(T_ABS=-273.15)\n.model ESD_SW VSWITCH(Ron=50 Roff=1e12 Von=250e-3 Voff=0)\n.model OR_SW VSWITCH(Ron=10e-3 Roff=1e9 Von=1e-3 Voff=0)\n******************************************************\nXV_OS VOS N037 VOS_DRIFT_TLV354\nR1 N036 CMR R_NOISELESS 1e-3 \nR2 FB- VOS- R_NOISELESS 1e-3 \nR3 N054 0 R_NOISELESS 1e12 \nC1 N054 0 1\nR4 VCC_B N053 R_NOISELESS 1e-3 \nC2 N053 0 1e-15\nC3 N055 0 1e-15\nR5 N055 VEE_B R_NOISELESS 1e-3 \nG_PSR N036 PSR N010 N009 1e-3\nR6 MID N039 R_NOISELESS 1e12 \nVCM_MIN N040 VEE_B -0.1\nR7 N040 MID R_NOISELESS 1e12 \nVCM_MAX N039 VCC_B +0.1\nXVCM_CLAMP PSR MID N038 MID N039 N040 VCCS_EXT_LIM_TLV354\nR8 N038 MID R_NOISELESS 1 \nC4 VCM_CLAMP MID 1e-15\nR9 N038 VCM_CLAMP R_NOISELESS 1e-3 \nV4 N052 OUT 0\nR10 MID N044 R_NOISELESS 1e12 \nR11 MID N045 R_NOISELESS 1e12 \nXIQp VIMON MID VCC MID VCCS_LIM_IQ_TLV354\nXIQn MID VIMON VEE MID VCCS_LIM_IQ_TLV354\nR12 VCC_B N013 R_NOISELESS 1e3 \nR13 N026 VEE_B R_NOISELESS 1e3 \nXCLAWp VIMON MID N013 VCC_B VCCS_LIM_CLAWp_TLV354\nXCLAWn MID VIMON VEE_B N026 VCCS_LIM_CLAWn_TLV354\nR14 VEE_CLP MID R_NOISELESS 1e3 \nR15 MID VCC_CLP R_NOISELESS 1e3 \nR16 N014 N013 R_NOISELESS 1e-3 \nR17 N027 N026 R_NOISELESS 1e-3 \nC5 MID N014 1e-15\nC6 N027 MID 1e-15\nR18 VOUT_S N045 R_NOISELESS 100 \nC7 VOUT_S MID 1e-12\nG2 MID VCC_CLP N014 MID 1e-3\nG3 MID VEE_CLP N027 MID 1e-3\nXCL_AMP N008 N034 VIMON MID N017 N024 CLAMP_AMP_LO_TLV354\nV_ISCp N008 MID 150\nV_ISCn N034 MID -165\nXOL_SENSE_TLV354 MID N057 OLN OLP OL_SENSE_TLV354\nR19 N034 MID R_NOISELESS 1e9 \nR20 N024 MID R_NOISELESS 1 \nC8 N025 MID 1e-15\nR21 MID N017 R_NOISELESS 1 \nR22 MID N008 R_NOISELESS 1e9 \nC9 MID N018 1e-15\nXCLAW_AMP VCC_CLP VEE_CLP VOUT_S MID N015 N022 CLAMP_AMP_LO_TLV354\nR23 VEE_CLP MID R_NOISELESS 1e9 \nR24 N022 MID R_NOISELESS 1 \nC10 N023 MID 1e-15\nR25 MID N015 R_NOISELESS 1 \nR26 MID VCC_CLP R_NOISELESS 1e9 \nC11 MID N016 1e-15\nXCL_SRC N018 N025 CL_CLAMP MID VCCS_LIM_4_TLV354\nXCLAW_SRC N016 N023 CLAW_CLAMP MID VCCS_LIM_3_TLV354\nR27 N015 N016 R_NOISELESS 1e-3 \nR28 N023 N022 R_NOISELESS 1e-3 \nR29 N017 N018 R_NOISELESS 1e-3 \nR30 N025 N024 R_NOISELESS 1e-3 \nR31 N057 MID R_NOISELESS 1 \nR32 N057 SW_OL R_NOISELESS 100 \nC12 SW_OL MID 1e-12\nR33 VIMON N044 R_NOISELESS 100 \nC13 VIMON MID 1e-12\nC_DIFF N011 VOS- 2e-12\nC_CMn VOS- MID 2e-12\nC_CMp MID N011 2e-12\nI_Q VCC VEE 5.2e-3\nI_B PSR MID 3e-12\nI_OS FB- MID 2e-12\nR36 N032 MID R_NOISELESS 1 \nR37 N035 MID R_NOISELESS 1e9 \nR38 MID N020 R_NOISELESS 1 \nR39 MID N012 R_NOISELESS 1e9 \nXGR_AMP N012 N035 N019 MID N020 N032 CLAMP_AMP_HI_TLV354\nXGR_SRC N021 N033 CLAMP MID VCCS_LIM_GR_TLV354\nC17 MID N021 1e-15\nC18 N033 MID 1e-15\nV_GRn N035 MID -120\nV_GRp N012 MID 110\nR40 N020 N021 R_NOISELESS 1e-3 \nR41 N033 N032 R_NOISELESS 1e-3 \nR42 VSENSE N019 R_NOISELESS 1e-3 \nC19 MID N019 1e-15\nR43 MID VSENSE R_NOISELESS 1e3 \nG_CMR VOS CMR N007 MID 1e-3\nG8 MID CLAW_CLAMP N041 MID 1e-3\nR45 MID CLAW_CLAMP R_NOISELESS 1e3 \nG9 MID CL_CLAMP CLAW_CLAMP MID 1e-3\nR46 MID CL_CLAMP R_NOISELESS 1e3 \nR47 N050 VCLP R_NOISELESS 100 \nC24 MID VCLP 1e-12\nE4 N050 MID CL_CLAMP MID 1\nE5 N045 MID OUT MID 1\nH1 N044 MID V4 1e3\nS1 N043 N042 SW_OL MID OL_SW\nR52 MID N011 R_NOISELESS 1T\nR53 VOS- MID R_NOISELESS 1T\nR_CMR CMR VOS R_NOISELESS 1e3 \nR59 N053 N054 R_NOISELESS 1e6 \nR60 N054 N055 R_NOISELESS 1e6 \nR_PSR PSR N036 R_NOISELESS 1e3 \nG15 MID VSENSE CLAMP MID 1e-3\nE6 VD2 MID N031 MID 1\nV_ORp N031 VCLP 0.65\nV_ORn N028 VCLP -0.65\nE7 VD1 MID N028 MID 1\nV11 N029 VD1 0\nV12 N030 VD2 0\nH2 OLN MID V11 -1\nH3 OLP MID V12 1\nS2 VCC IN- IN- VCC ESD_SW\nS3 VCC IN+ IN+ VCC ESD_SW\nS4 IN- VEE VEE IN- ESD_SW\nS5 IN+ VEE VEE IN+ ESD_SW\nS6 VCC OUT OUT VCC ESD_SW\nS7 OUT VEE VEE OUT ESD_SW\nE1 MID 0 N054 0 1\nG16 0 VCC_B VCC 0 1\nG17 0 VEE_B VEE 0 1\nR88 VCC_B 0 R_NOISELESS 1 \nR89 VEE_B 0 R_NOISELESS 1 \nS8 N030 CLAMP CLAMP N030 OR_SW\nS9 CLAMP N029 N029 CLAMP OR_SW\nXVCCS_LIM_1_TLV354 VCM_CLAMP FB- MID GAIN_1 VCCS_LIM_1_TLV354\nXVCCS_LIM_2_TLV354 GAIN_1 MID MID CLAMP VCCS_LIM_2_TLV354\nR44 GAIN_1 MID R_NOISELESS 1e6 \nR58 CLAMP MID R_NOISELESS 1e6 \nC20 CLAMP MID 6.5e-10\nR34 N011 IN+ R_NOISELESS 1e-3 \nR35 VOS- IN- R_NOISELESS 1e-3 \nR48 MID N041 R_NOISELESS 1e6 \nG1 MID N041 VSENSE MID 1e-6\nC14 N041 MID 7.23e-16\nXe_n N037 N011 VNSE_TLV354\nC22 N002 N001 4.547e-15\nG_adjust1 MID N001 N011 MID 3.985e-2\nRsrc1 N001 MID R_NOISELESS 1 \nR56 N002 MID R_NOISELESS 2.063e5 \nR57 N002 N001 R_NOISELESS 1e8 \nRsrc2 N007 MID R_NOISELESS 1 \nG5 MID N007 N002 MID 1\nC23 N005 N006 1.36e-14\nG_adjust2 MID N006 VCC_B MID 8.834e-1\nRsrc3 N006 MID R_NOISELESS 1 \nR61 N005 MID R_NOISELESS 4.256e4 \nR62 N005 N006 R_NOISELESS 1e8 \nG6 MID N010 N005 MID 1\nRsrc4 N010 MID R_NOISELESS 1 \nC25 N004 N003 6.366e-14\nR63 N004 MID R_NOISELESS 2.501e4 \nR64 N004 N003 R_NOISELESS 1e8 \nG7 MID N009 N004 MID 1\nRsrc6 N009 MID R_NOISELESS 1 \nG10 MID N003 VEE_B MID 6.64e-1\nR65 N003 MID R_NOISELESS 1 \nRx1 N052 N051 R_NOISELESS 6.67e4\nRdummy1 N052 MID R_NOISELESS 6.67e3\nG_Zo MID N042 CL_CLAMP N052 89\nRdc N042 MID R_NOISELESS 1\nR69 N043 N042 R_NOISELESS 10e3\nR70 MID N043 R_NOISELESS 4.65e2\nG12 MID N046 N043 MID 22.5\nR71 N046 MID R_NOISELESS 1\nC28 N043 N042 6e-8\nR75 N047 N046 R_NOISELESS 2.3e4\nR76 N056 N047 R_NOISELESS 10e3\nC29 MID N056 4.823e-14\nG14 MID N048 N047 MID 1\nR77 N048 MID R_NOISELESS 1\nR78 N049 N048 R_NOISELESS 10e3\nR79 MID N049 R_NOISELESS 3.311e1\nC30 N049 N048 4.823e-14\nXU1 N049 MID N051 MID VCVS_LIM_1_TLV354\nXi_np N037 MID FEMT_TLV354\nXi_nn VOS- MID FEMT_TLV354\n.ends TLV354\n*\n.SUBCKT VOS_DRIFT_TLV354 VOS+ VOS-\n.PARAM DC = 645e-6\n.PARAM POL = 1\n.PARAM DRIFT = 4.5E-06\nE1 VOS+ VOS- VALUE={DC+POL*DRIFT*(TEMP-27)}\n.ENDS\n*\n.subckt CLAMP_AMP_HI_TLV354 VC+ VC- VIN COM VO+ VO-\n.param G=10\nGVo+ COM Vo+ Value = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}\nGVo- COM Vo- Value = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}\n.ends CLAMP_AMP_HI_TLV354\n*\n.subckt OL_SENSE_TLV354 1   2  3  4\nGSW+ 1 2 Value = {IF((V(3,1)>1e-3 | V(4,1)>1e-3),1,0)}\n.ends OL_SENSE_TLV354\n*\n.subckt FEMT_TLV354 1 2\n.param NVRF=50\n.param RNVF={1.184*PWR(NVRF,2)}\nE1 3 0 5 0 10\nR1 5 0 {RNVF}\nR2 5 0 {RNVF}\nG1 1 2 3 0 1e-6\n.ends FEMT_TLV354\n*\n.subckt VCCS_EXT_LIM_TLV354 VIN+ VIN- IOUT- IOUT+ VP+ VP-\n.param Gain = 1\nG1 IOUT+ IOUT- VALUE={LIMIT(Gain*V(VIN+,VIN-),V(VP-,VIN-), V(VP+,VIN-))}\n.ends VCCS_EXT_LIM_TLV354\n*\n.subckt VCCS_LIM_1_TLV354 VC+ VC- IOUT+ IOUT-\n.param Gain = 1e-4\n.param Ipos = .5\n.param Ineg = -.5\nG1 IOUT+ IOUT- VALUE={LIMIT(Gain*V(VC+,VC-),Ineg,Ipos)}\n.ends VCCS_LIM_1_TLV354\n*\n.subckt VCCS_LIM_2_TLV354 VC+ VC- IOUT+ IOUT-\n.param Gain = 4.71e-3\n.param Ipos = 99.6e-3\n.param Ineg = -99.6e-3\nG1 IOUT+ IOUT- VALUE={LIMIT(Gain*V(VC+,VC-),Ineg,Ipos)}\n.ends VCCS_LIM_2_TLV354\n*\n.subckt VCCS_LIM_3_TLV354 VC+ VC- IOUT+ IOUT-\n.param Gain = 1\n.param Ipos = 220e-3\n.param Ineg = -240e-3\nG1 IOUT+ IOUT- VALUE={LIMIT(Gain*V(VC+,VC-),Ineg,Ipos)}\n.ends VCCS_LIM_3_TLV354\n*\n.subckt VCCS_LIM_4_TLV354 VC+ VC- IOUT+ IOUT-\n.param Gain = 1\n.param Ipos = 230e-3\n.param Ineg = -250e-3\nG1 IOUT+ IOUT- VALUE={LIMIT(Gain*V(VC+,VC-),Ineg,Ipos)}\n.ends VCCS_LIM_4_TLV354\n*\n.subckt VCCS_LIM_CLAWn_TLV354 VC+ VC- IOUT+ IOUT-\nG1 IOUT+ IOUT- TABLE {(V(VC+,VC-))} =\n+(0, 1.0064e-4)\n+(10, 1.28e-4)\n+(20, 2.16e-4)\n+(50, 5.31e-4)\n+(90.6, 9.91e-4)\n+(120, 1.39e-3)\n+(140, 1.7e-3)\n+(163.7, 2.16e-3)\n.ends VCCS_LIM_CLAWn_TLV354\n*\n.subckt VCCS_LIM_IQ_TLV354 VC+ VC- IOUT+ IOUT-\n.param Gain = 1e-3\nG1 IOUT+ IOUT- VALUE={IF( (V(VC+,VC-)<=0),0,Gain*V(VC+,VC-) )}\n.ends VCCS_LIM_IQ_TLV354\n*\n.subckt VCVS_LIM_1_TLV354 VC+ VC- VOUT+ VOUT-\n.param Gain = 3.03e2\n.param Vpos = 20.5e3\n.param Vneg = -22.5e3\nE1 VOUT+ VOUT- VALUE={LIMIT(Gain*V(VC+,VC-),Vneg,Vpos)}\n.ends VCVS_LIM_1_TLV354\n*\n.subckt VNSE_TLV354 1 2\n.param FLW=10\n.param NLF=605\n.param NVR=7.3\n.param GLF={PWR(FLW,0.25)*NLF/1164}\n.param RNV={1.184*PWR(NVR,2)}\n.model DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16\nI1 0 7 10E-3\nI2 0 8 10E-3\nD1 7 0 DVN\nD2 8 0 DVN\nE1 3 6 7 8 {GLF}\nR1 3 0 1E9\nR2 3 0 1E9\nR3 3 6 1E9\nE2 6 4 5 0 10\nR4 5 0 {RNV}\nR5 5 0 {RNV}\nR6 3 4 1E9\nR7 4 0 1E9\nE3 1 2 3 4 1\n.ends VNSE_TLV354\n*\n.subckt CLAMP_AMP_LO_TLV354 VC+ VC- VIN COM VO+ VO-\n.param G=1\nGVo+ COM Vo+ Value = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}\nGVo- COM Vo- Value = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}\n.ends CLAMP_AMP_LO_TLV354\n*\n.subckt VCCS_LIM_GR_TLV354 VC+ VC- IOUT+ IOUT-\n.param Gain = 1\n.param Ipos = 0.25\n.param Ineg = -0.25\nG1 IOUT+ IOUT- VALUE={LIMIT(Gain*V(VC+,VC-),Ineg,Ipos)}\n.ends VCCS_LIM_GR_TLV354\n*\n.subckt VCCS_LIM_CLAWp_TLV354 VC+ VC- IOUT+ IOUT-\nG1 IOUT+ IOUT- TABLE {(V(VC+,VC-))} =\n+(0, 1.0064e-4)\n+(9.82, 1.1e-4)\n+(20, 2.31e-4)\n+(40.51, 4.34e-4)\n+(70, 7.51e-4)\n+(100, 1.17e-3)\n+(120, 1.52e-3)\n+(150, 2.11e-3)\n.ends VCCS_LIM_CLAWp_TLV354\n*
